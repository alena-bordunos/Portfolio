# Анализ результатов А/В теста рекомендательной системы

**Цель проекта:**
Провести оценку результатов A/B-теста, используя датасет с действиями пользователей, техническое задание и несколько вспомогательных датасетов.

**Ход исследования:**
1) Предобработка данных:
    - знакомство с данными
    - обработка пропусков и дубликатов
    - проверка соответствия требованиям технического задания
2) Исследовательский анализ:
    - анализ распределения числа событий на пользователя
    - анализ распределения числа событий в выборках по дням
    - изучение воронки событий
3) Анализ результатов А/В тестирования
4) Общий вывод по итогам проведения А/В теста

**Техническое задание**

- Название теста: `recommender_system_test`;
- группы: А — контрольная, B — новая платёжная воронка;
- дата запуска: 2020-12-07;
- дата остановки набора новых пользователей: 2020-12-21;
- дата остановки: 2021-01-04;
- аудитория: в тест должно быть отобрано 15% новых пользователей из региона EU;
- назначение теста: тестирование изменений, связанных с внедрением улучшенной рекомендательной системы;
- ожидаемое количество участников теста: 6000.
- ожидаемый эффект: за 14 дней с момента регистрации пользователи покажут улучшение каждой метрики не менее, чем на 10%:
    - конверсии в просмотр карточек товаров — событие `product_page`,
    - просмотры корзины — `product_cart`,
    - покупки — `purchase`.

## Общий вывод по итогам проверки результатов А/В теста

На этапе знакомства с данными дубликатов не выявлено, пропуски обнаружены только в деталях событий, не повлияют на ход исследования. Скорректированы типы данных.

При подробном изучении предоставленных данных на предмет соответствия требованиям технического задания обнаружено большое количество нарушений:
1) Тест остановлен 30.12.2022, по ТЗ данные должны были собираться до 4.01.2023
2) Во время проведения теста в регионе EU проводилась промоакция "Cristmas@New Year Promo" - это является нарушением проведения теста, так как любые промоакции влияют на поведение клиента, соответственно, искажают результаты эксперимента
3) Обнаружено параллельное проведение другого А/В теста, в котором найдены пересекающиеся с нашим тестом участники (всего 1602). Это является грубым нарушением проведения эксперимента, так как влияние, оказанное на участников может привести к искажению результатов тестов и снижению точности выводов. 783 из них были в группе А конкурирующего теста, на них не было оказано влияние. 819 человек попали в группу В конкурирующего теста. Это повлияло на их результат, соответственно они были удалены
4) Участников в группе А больше, чем в группе В, это является нарушением проведения А/В теста, так как сбор одинакового количества участников в группах A/B теста важен для обеспечения баланса между группами и уменьшения влияния внешних факторов на результаты теста. Результаты теста могут быть искажены, так как различия в поведении участников могут быть связаны не с изменением тестируемого элемента
5) Данные были отредактированы - очерчен лайфтайм пользователя - 14 дней, удалены превышающие этот период события и пользователи, "не дожившие" до окончания лайфтайма из-за преждевременной остановки эксперимента
6) После очистки данных изменились показатели, которые были соблюдены в сырых - количество участников сократилось до 1866, что гораздо меньше заявленных 6000, доля новых пользователей из региона EU сократилась до 4.41%, что гораздо меньше требуемых 15%.

Всего пользователи совершают 4 события: вход, переход на страницу продукта, переход на страницу корзины и покупка товара. Чаще всего происходит событие - login, реже всего пользователи обеих групп совершают покупку. Один пользователь из группы В миновал событие login. На графике видно, что количество пользователей, совершающих события в группе А сильно больше. Это связано, в первую очередь, с тем, что при проведении теста допущено неравномерное распределение прользователей между группами, что усложняет интерпретацию результатов.

Среднее количество событий на пользователя в группе А - 6.96, в группе В - 5.83. Проведенный t-test подтвердил наличие статистически значимых различий между этими двумя средними.

События во время проведения эксперимента равномерно распределены по дням, однако, в группе А замете большой всплеск количества событий с 14 по 18 декабря. На графике регистрации новых пользователей по дням заметно резкое увеличение количества регистраций 14 декабря, и большое количество с 15 по 17 декабря. Это объясняет большое количество пользовательских событий в эти и несколько последующих дней.

В группе А до покупки от первого этапа доходит 29.79% пользователей. Меньше всего конверсия на эатпе перехода в корзину(около 47 процентов к предыдущему шагу), однако, конверсия в покупку от корзины около 97 процентов. Это может означать, что некоторые пользователи совершают покупку минуя переход в корзину (например, функция "покупка в один клик"). Показатель общей конверсии в группе В немного ниже, чем в группе А - 28.42%.

Для проверки статистически значимой разницы между группами в событиях воронки применен двухстороний Z-тест с поправкой Бонферрони:
сформулированы гипотезы Нулевая: различий в числе пользователей, совершивших события между группами А и В нет. Альтернативная: различия в числе пользователей между группами есть.

По результатам проведенного Z-теста на выборках для событий product_cart, product_page и purchase, были получены следующие значения p-значения: 0.519, 0.004 и 0.551 соответственно.

Для события product_cart полученное p-значение равно 0.519, что говорит о том, что различия между группами не являются статистически значимыми, и мы не можем отвергнуть нулевую гипотезу. Для события purchase полученное p-значение равно 0.551, что также указывает на то, что различия между группами не являются статистически значимыми, и мы не можем отвергнуть нулевую гипотезу.

Однако, для события product_page полученное p-значение равно 0.004, что говорит о том, что различия между группами являются статистически значимыми, и мы можем отвергнуть нулевую гипотезу. Это означает, что существует статистически значимая разница между группами, связанная с событием product_page.

Таким образом, можно сделать вывод, что изменения, связанные с событием product_page, могут оказать влияние на конверсию пользователей, в то время как изменения, связанные с событиями product_cart и purchase, не оказывают статистически значимого влияния на конверсию. Однако, стоит учесть, что эксперимент был проведен с большим количеством нарушений, это сильно влияет на интерпретацию результатов.
